<module>
    <inherits name='com.google.gwt.user.User'/>

    <!--<define-property name="selectorCapability" values="native,xpath,js"/>-->
    Â  <!-- enable for native getClassByName shortcut acceleration -->
    <define-property name="selectorCapability"
                     values="native,js"/>
    <property-provider name="selectorCapability">
        <![CDATA[
   // useful for benchmarking tests when you want to force non-accelerated queries
   //if(window.location.href.indexOf("_selector_force_js") != -1) return "js"; 
   if(document.querySelectorAll && /native/.test(document.querySelectorAll.toString())) {
      return "native";
   }
   return "js"
     ]]>
    </property-provider>

    <generate-with class="gwtquery.rebind.SelectorGeneratorJS">
        <when-type-assignable class="gwtquery.client.Selectors"/>
        <any>
            <when-property-is name="user.agent" value="gecko"/>
            <when-property-is name="user.agent" value="ie6"/>
        </any>

    </generate-with>

    <generate-with class="gwtquery.rebind.SelectorGeneratorXPath">
        <when-type-assignable class="gwtquery.client.Selectors"/>
        <any>
            <when-property-is name="user.agent" value="gecko1_8"/>
            <when-property-is name="user.agent" value="opera"/>
            <all>
                <when-property-is name="selectorCapability" value="js"/>
                <when-property-is name="user.agent" value="safari"/>
            </all>
        </any>
    </generate-with>

    <generate-with class="gwtquery.rebind.gebcn.SelectorGeneratorNativeGEBCN">
        <when-type-assignable class="gwtquery.client.Selectors"/>
        <all>
            <when-property-is name="selectorCapability" value="native"/>
            <when-property-is name="user.agent" value="safari"/>
        </all>
    </generate-with>

    <!--versions which handle native getElementsByClassName -->
    <!--<generate-with class="gwtquery.rebind.gebcn.SelectorGeneratorJSGEBCN">-->
    <!--<when-type-assignable class="gwtquery.client.Selectors"/>-->
    <!--<when-property-is name="selectorCapability" value="js_gebcn"/>-->
    <!--</generate-with>-->

    <!--<generate-with class="gwtquery.rebind.gebcn.SelectorGeneratorXPathGEBCN">-->
    <!--<when-type-assignable class="gwtquery.client.Selectors"/>-->
    <!--<when-property-is name="selectorCapability" value="xpath_gebcn"/>-->
    <!--</generate-with>-->

    <!--<generate-with class="gwtquery.rebind.gebcn.SelectorGeneratorNativeGEBCN">-->
    <!--<when-type-assignable class="gwtquery.client.Selectors"/>-->
    <!--<when-property-is name="selectorCapability" value="native_gebcn"/>-->
    <!--</generate-with>-->


    <replace-with class="gwtquery.client.impl.DocumentStyleImpl">
        <when-type-assignable class="gwtquery.client.impl.DocumentStyleImpl"/>
    </replace-with>

    <replace-with class="gwtquery.client.impl.DocumentStyleImplIE">
        <when-type-assignable class="gwtquery.client.impl.DocumentStyleImpl"/>
        <when-property-is name="user.agent" value="ie6"/>
    </replace-with>


    <replace-with class="gwtquery.client.impl.SelectorEngineJS">
        <when-type-assignable class="gwtquery.client.impl.SelectorEngineImpl"/>
        <when-property-is name="user.agent" value="gecko"/>
    </replace-with>

    <replace-with class="gwtquery.client.impl.SelectorEngineJSIE">
        <when-type-assignable class="gwtquery.client.impl.SelectorEngineImpl"/>
        <when-property-is name="user.agent" value="ie6"/>
    </replace-with>

    <replace-with class="gwtquery.client.impl.SelectorEngineXPath">
        <when-type-assignable class="gwtquery.client.impl.SelectorEngineImpl"/>
        <any>
            <when-property-is name="user.agent" value="gecko1_8"/>
            <when-property-is name="user.agent" value="opera"/>
            <all>
                <when-property-is name="selectorCapability" value="js"/>
                <when-property-is name="user.agent" value="safari"/>
            </all>
        </any>
    </replace-with>

    <replace-with class="gwtquery.client.impl.SelectorEngineNative">
        <when-type-assignable class="gwtquery.client.impl.SelectorEngineImpl"/>
        <all>
            <when-property-is name="user.agent" value="safari"/>
            <when-property-is name="selectorCapability" value="native"/>
        </all>
    </replace-with>

</module>